/* Copyright Â© 2023 App Nerds LLC v1.4.0 */
const DateFormats={IsoWithTimezone:"yyyy-mm-ddthh:mm:ssz",IsoWithoutTimezone:"yyyy-mm-ddthh:mm:ss",InternationalWithSeconds:"yyyy-mm-dd hh:mm:ss",International:"yyyy-mm-dd hh:mm",UsDateTimeWithSeconds:"mm/dd/yyyy hh:mm:ss am/pm",UsDateTimeWithoutSeconds:"mm/dd/yyyy hh:mm am/pm",IsoDate:"yyyy-mm-dd",UsDate:"mm/dd/yyyy"},formatMap={"yyyy-mm-ddthh:mm:ssz":format1,"yyyy-mm-ddthh:mm:ss":format2,"yyyy-mm-dd hh:mm:ss":format3,"yyyy-mm-dd hh:mm":format4,"mm/dd/yyyy hh:mm:ss am/pm":format5,"mm/dd/yyyy hh:mm am/pm":format6,"yyyy-mm-dd":format7,"mm/dd/yyyy":format8};
/**
 * parseDateTime parses a date/time string into a Date object.
 * @param {string|number|Date} dt
 * @returns {Date}
 */
function parseDateTime(dt){return"number"==typeof dt?new Date(dt):dt instanceof Date?dt:"string"==typeof dt?parseDateString(dt):void 0}
/**
 * formatDateTime formats a Date object into a string using the specified format.
 * @param {string|number|Date} dt
 * @param {string} format
 * @returns {string}
 */function formatDateTime(dt,format){dt=parseDateTime(dt);let e=formatMap[format.toLowerCase()];if(e)return e(dt);throw new Error("Invalid date format: "+format)}
/**
 * @param {Date} dt
 * @returns {string}
 */function format1(dt){var{year:dt,month:e,day:t,hour:a,minute:r,second:n}=breakDownDate(dt);return`${zeroPad(dt)}-${zeroPad(e)}-${zeroPad(t)}T${zeroPad(a)}:${zeroPad(r)}:${zeroPad(n)}Z`}
/**
 * @param {Date} dt
 * @returns {string}
 */function format2(dt){var{year:dt,month:e,day:t,hour:a,minute:r,second:n}=breakDownDate(dt);return`${zeroPad(dt)}-${zeroPad(e)}-${zeroPad(t)}T${zeroPad(a)}:${zeroPad(r)}:`+zeroPad(n)}
/**
 * @param {Date} dt
 * @returns {string}
 */function format3(dt){var{year:dt,month:e,day:t,hour:a,minute:r,second:n}=breakDownDate(dt);return`${zeroPad(dt)}-${zeroPad(e)}-${zeroPad(t)} ${zeroPad(a)}:${zeroPad(r)}:`+zeroPad(n)}
/**
 * @param {Date} dt
 * @returns {string}
 */function format4(dt){var{year:dt,month:e,day:t,hour:a,minute:r}=breakDownDate(dt);return`${zeroPad(dt)}-${zeroPad(e)}-${zeroPad(t)} ${zeroPad(a)}:`+zeroPad(r)}
/**
 * @param {Date} dt
 * @returns {string}
 */function format5(dt){let{year:e,month:t,day:a,hour:r,minute:n,second:i}=breakDownDate(dt),d="AM";return 12<r&&(d="PM",r-=12),0===r&&(r=12),`${zeroPad(t)}/${zeroPad(a)}/${zeroPad(e)} ${zeroPad(r)}:${zeroPad(n)}:${zeroPad(i)} `+d}
/**
 * @param {Date} dt
 * @returns {string}
 */function format6(dt){let{year:e,month:t,day:a,hour:r,minute:n}=breakDownDate(dt),i="AM";return 12<r&&(i="PM",r-=12),0===r&&(r=12),`${zeroPad(t)}/${zeroPad(a)}/${zeroPad(e)} ${zeroPad(r)}:${zeroPad(n)} `+i}
/**
 * @param {Date} dt
 * @returns {string}
 */function format7(dt){var{year:dt,month:e,day:t}=breakDownDate(dt);return`${zeroPad(dt)}-${zeroPad(e)}-`+zeroPad(t)}
/**
 * @param {Date} dt
 * @returns {string}
 */function format8(dt){var{year:dt,month:e,day:t}=breakDownDate(dt);return`${zeroPad(e)}/${zeroPad(t)}/`+zeroPad(dt)}
/**
 * @param {Date} dt
 * @returns {object}
 */function breakDownDate(dt){return{year:dt.getFullYear(),month:dt.getMonth()+1,day:dt.getDate(),hour:dt.getHours(),minute:dt.getMinutes(),second:dt.getSeconds()}}
/**
 * @param {number} num
 * @returns {string}
 */function zeroPad(num){return num.toString().padStart(2,"0")}
/**
 * @param {string} dt
 * @returns {Date}
 */function parseDateString(dt){var t=[/(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})t(?<hour>\d{2}):(?<minute>\d{2}):(?<second>\d{2})z/i,/* YYYY-MM-DDTHH-mm-ssZ */
/(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})t(?<hour>\d{2}):(?<minute>\d{2}):(?<second>\d{2})/i,/* YYYY-MM-DDTHH-mm-ss */
/(?<month>\d{2})\/(?<day>\d{2})\/(?<year>\d{4})\s+(?<hour>\d{2}):(?<minute>\d{2}):(?<second>\d{2})\s*(?<meridian>am|pm)/i,/* MM/DD/YYYY HH:mm:ss am/pm */
/(?<month>\d{2})\/(?<day>\d{2})\/(?<year>\d{4})\s+(?<hour>\d{2}):(?<minute>\d{2})\s*(?<meridian>am|pm)/i,/* MM/DD/YYYY HH:mm am/pm */
/(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/,/* YYYY-MM-DD */
/(?<month>\d{2})\/(?<day>\d{2})\/(?<year>\d{4})/];for(let e=0;e<t.length;e++){var a=dt.match(t[e]);if(a){var r=parseInt(a.groups.year)||(new Date).getFullYear(),n=parseInt(a.groups.month)||(new Date).getMonth(),i=parseInt(a.groups.day)||(new Date).getDate();let e=parseInt(a.groups.hour)||0;var d=parseInt(a.groups.minute)||0,o=parseInt(a.groups.second)||0;let t=a.groups.meridian||"";return""!==t&&"pm"===t.toLowerCase()&&e<12&&(e+=12),new Date(r,n-1,i,e,d,o)}}throw new Error("no pattern match for "+dt)}
/**
 * date-time-picker is a custom HTML element that allows the user to select a date and time.
 * It supports custom date formats.
 * @class DateTimePicker
 * @extends HTMLElement
 */class DateTimePicker extends HTMLElement{constructor(){super(),this._daysOfTheWeek=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this._months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.name=this.getAttribute("name")||"dateTime",
/* Get the date from attributes. If one isn't passed in, use now, but zero out the time. */
this.date=this.getAttribute("date")?parseDateTime(this.getAttribute("date")):"",this.dateFormat=this.getAttribute("date-format")||DateFormats.IsoWithTimezone,this.showTimeSelector=this.dateFormat===DateFormats.IsoWithTimezone||this.dateFormat===DateFormats.IsoWithoutTimezone||this.dateFormat===DateFormats.UsDateTimeWithSeconds||this.dateFormat===DateFormats.UsDateTimeWithoutSeconds||this.dateFormat===DateFormats.InternationalWithSeconds||this.dateFormat===DateFormats.International,this.twentyFourHourTime=this.dateFormat===DateFormats.IsoWithTimezone||this.dateFormat===DateFormats.IsoWithoutTimezone||this.dateFormat===DateFormats.InternationalWithSeconds||this.dateFormat===DateFormats.International,this.timeIncrement=this.getAttribute("time-increment")||"hour",// valid values are hour,30minute,15minute,10minute,5minute,1minute
this.today=new Date,this.inputEl=null,this.popupEl=null,this.headerEl=null,this.bodyEl=null,this.day=0,this.timeSelectorEl=null,this.selectedTimeIndex=0,this.yearBlockStart=this._getYear()-5}connectedCallback(){this.setAttribute("name",this.name+"-datepicker"),this.setAttribute("aria-label","Date Picker"),this.inputEl=this._createInputEl();var e=this._createInputLabel();""===this.date&&(this.date=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),0,0,0)),this.popupEl=this._createPopupEl(),this._drawHeaderEl(),this._drawCalendarBody(),this.insertAdjacentElement("beforeend",this.inputEl),this.insertAdjacentElement("beforeend",e),this.insertAdjacentElement("beforeend",this.popupEl)}
/****************************************************
	 * PUBLIC METHODS
	 ****************************************************/
/**
	 * clear clears the date picker value.
	 * @returns {void}
	 */clear(){this.inputEl.value=""}
/**
	 * getDate returns the currently selected date.
	 * @returns {string|Date}
	 */getDate(){return this.date}
/**
	 * Moves the calendar forward or backward one month. A positive number moves forward, a negative number moves backward.
	 * @param {number} direction
	 */moveMonth(direction){let e=new Date(this.date);e.setMonth(e.getMonth()+direction),this.date=e,
/** @type {HTMLAnchorElement} */this.popupEl.querySelector("header a:nth-child(2)").innerText=this._getMonthName(),
/** @type {HTMLAnchorElement} */this.popupEl.querySelector("header a:nth-child(3)").innerText=this._getYear().toString(),this.popupEl.querySelector(".calendar-body").remove(),this._drawCalendarBody()}
/**
	 * setDate sets the date picker value.
	 * @param {Date} dt
	 * @returns {void}
	 */setDate(dt){this.date=dt,this.day=dt.getDate(),this._setInputDate()}
/**
	 * toggleCalendar shows or hides the calendar.
	 * @returns {void}
	 */toggleCalendar(){this.popupEl.classList.toggle("calendar-hidden"),this.inputEl.focus()}
/****************************************************
	 * PRIVATE METHODS
	 ****************************************************/_drawHeaderEl(){var e=this._createPreviousMonthButton(),t=this._createNextMonthButton(),a=this._createCurrentMonthButton(),r=this._createCurrentYearButton();this.headerEl.innerHTML="",this.headerEl.insertAdjacentElement("beforeend",e),this.headerEl.insertAdjacentElement("beforeend",a),this.headerEl.insertAdjacentElement("beforeend",r),this.headerEl.insertAdjacentElement("beforeend",t)}_drawCalendarBody(){let t=document.createElement("div"),a=this._createCalendarBodyWeekDiv(),e=this._getFirstDayOfMonth();var r=e.getDay();let n=this._getLastDayOfMonth();var i,d=n.getDate();let o=!1;t.classList.add("calendar-body");for(let e=0;e<d+r;e++){
/*
			 * Basically we want to not render day numbers until we hit the
			 * first day of the month on the correct day of the week.
			 */
o||e===r&&(o=!0);var s=this._createCalendarBodyDayDiv(o,e,r);a.insertAdjacentElement("beforeend",s),
/*
			 * Create a new week div every 7 days.
			 */
(e+1)%7||(t.insertAdjacentElement("beforeend",a),a=this._createCalendarBodyWeekDiv())}""!==a.innerHTML&&t.insertAdjacentElement("beforeend",a),this.showTimeSelector&&(this._createTimeSelector(),t.insertAdjacentElement("beforeend",this.timeSelectorEl),i=this._createOkButton(),t.insertAdjacentElement("beforeend",i)),this._replaceBodyEl(t)}_drawMonthListBody(){const t=document.createElement("div");t.classList.add("month-list-body");for(let e=0;e<this._months.length;e++){var a=this._createMonthButton(e);t.insertAdjacentElement("beforeend",a)}this._replaceBodyEl(t)}_drawYearListBody(){const e=document.createElement("div"),t=(e.classList.add("year-list-body"),document.createElement("div"));t.classList.add("year-list");var a=this._createYearUpButton(),r=this._createYearDownButton();e.insertAdjacentElement("beforeend",a);for(let e=this.yearBlockStart;e<this.yearBlockStart+10;e++){var n=this._createYearButton(e);t.insertAdjacentElement("beforeend",n)}e.insertAdjacentElement("beforeend",t),e.insertAdjacentElement("beforeend",r),this._replaceBodyEl(e)}_getMonth(){return new Date(this.date).getMonth()}_getMonthName(){return this._months[this._getMonth()]}_getYear(){return new Date(this.date).getFullYear()}_getDay(){return new Date(this.date).getDate()}_getFirstDayOfMonth(){return new Date(this._getYear(),this._getMonth(),1)}_getLastDayOfMonth(){return new Date(this._getYear(),this._getMonth()+1,0)}_getHour(){return new Date(this.date).getHours()}_getMinute(){return new Date(this.date).getMinutes()}_getSecond(){return new Date(this.date).getSeconds()}
/**
	 * @param {number} day
	 */_onCalendarDayClick(day){this.day=day,this._setInputDate(),this.showTimeSelector?this._createTimeSelectorOptions():(this.toggleCalendar(),this.inputEl.focus())}_onHeaderMonthClick(){this._drawMonthListBody()}
/**
	 * @returns {void}
	 */_onHeaderYearClick(){this._drawYearListBody()}
/**
	 * @param {number} monthIndex
	 */_onMonthClick(monthIndex){this.date=new Date(this._getYear(),monthIndex,1),this._setInputDate(),this._drawHeaderEl(),this._drawCalendarBody()}
/**
	 * @param {Event & { target: HTMLSelectElement }} e
	 */_onTimeChange(e){var t=e.target.value;this.selectedTimeIndex=e.target.selectedIndex,this.date=t,this._setInputDate()}
/**
	 * @param {number} year
	 */_onYearClick(year){this.date=new Date(year,this._getMonth(),1),this._setInputDate(),this._drawHeaderEl(),this._drawCalendarBody()}_onYearDownClick(){this.yearBlockStart+=10,this._drawYearListBody()}_onYearUpClick(){this.yearBlockStart-=10,this._drawYearListBody()}
/**
	 * @param {HTMLDivElement} newBody
	 */_replaceBodyEl(newBody){this.bodyEl.innerHTML="",this.bodyEl.insertAdjacentElement("beforeend",newBody)}_setInputDate(){var e=new Date(this._getYear(),this._getMonth(),this.day,this._getHour(),this._getMinute(),this._getSecond());this.inputEl.value=formatDateTime(e,this.dateFormat),this.dispatchEvent(new CustomEvent("change",{detail:{value:e}}))}
/**********************************************************************
	 * Methods to return invididual elements
	 *********************************************************************/
/**
	 * @param {boolean} started
	 * @param {number} dayIndex
	 * @param {number} firstDayOfWeek
	 * @returns {HTMLDivElement}
	 */_createCalendarBodyDayDiv(started,dayIndex,firstDayOfWeek){let t=document.createElement("div");if(t.classList.add("day"),started){started=dayIndex-firstDayOfWeek+1;let e=document.createElement("a");e.href="javascript:void(0)",e.innerText=""+started,e.addEventListener("click",this._onCalendarDayClick.bind(this,started)),new Date(this._getYear(),this._getMonth(),started)===this.today&&e.classList.add("today"),t.insertAdjacentElement("beforeend",e)}else t.classList.add("disabled");return t}_createCalendarBodyWeekDiv(){let e=document.createElement("div");return e.classList.add("week"),e}_createCurrentMonthButton(){let e=document.createElement("a");return e.href="javascript:void(0)",e.innerHTML=this._getMonthName(),e.addEventListener("click",this._onHeaderMonthClick.bind(this)),e}_createCurrentYearButton(){let e=document.createElement("a");return e.href="javascript:void(0)",e.innerHTML=this._getYear().toString(),e.addEventListener("click",this._onHeaderYearClick.bind(this)),e}_createInputEl(){let e=document.createElement("input");return e.setAttribute("type","datetime"),e.setAttribute("name",this.name),e.setAttribute("aria-describedby",this.name+"-format"),this.date instanceof Date&&(e.value=formatDateTime(this.date,this.dateFormat)),e.addEventListener("click",()=>{""===this.date&&(this.date=new Date((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDate(),0,0,0),this._drawHeaderEl(),this._drawCalendarBody()),this.toggleCalendar()}),e}_createInputLabel(){let e=document.createElement("p");return e.innerText=`(${this.dateFormat})`,e.id=this.name+"-format",e}
/**
	 * @param {number} monthIndex
	 * @returns {HTMLAnchorElement}
	 */_createMonthButton(monthIndex){let e=document.createElement("a");return e.href="javascript:void(0)",e.innerText=this._months[monthIndex],e.addEventListener("click",this._onMonthClick.bind(this,monthIndex)),e}_createNextMonthButton(){let e=document.createElement("a");return e.href="javascript:void(0)",e.innerHTML='<i class="icon--mdi icon--mdi--arrow-right"></i>',e.addEventListener("click",this.moveMonth.bind(this,1)),e}_createOkButton(){let e=document.createElement("a");return e.href="javascript:void(0)",e.innerText="OK",e.classList.add("ok"),e.addEventListener("click",this.toggleCalendar.bind(this)),e}_createPopupEl(){let e=document.createElement("div");return this.headerEl=document.createElement("header"),this.bodyEl=document.createElement("section"),e.classList.add("date-time-picker-popup","calendar-hidden"),e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-label","Choose Date"),e.insertAdjacentElement("beforeend",this.headerEl),e.insertAdjacentElement("beforeend",this.bodyEl),e}_createPreviousMonthButton(){let e=document.createElement("a");return e.href="javascript:void(0)",e.innerHTML='<i class="icon--mdi icon--mdi--arrow-left"></i>',e.addEventListener("click",this.moveMonth.bind(this,-1)),e}_createTimeSelector(){this.timeSelectorEl=document.createElement("select"),this._createTimeSelectorOptions(),this.timeSelectorEl.addEventListener("change",this._onTimeChange.bind(this))}_createTimeSelectorOptions(){this.timeSelectorEl.innerHTML="";let t=1,r=("5minute"===this.timeIncrement&&(t=5),"10minute"===this.timeIncrement&&(t=10),"15minute"===this.timeIncrement&&(t=15),"30minute"===this.timeIncrement&&(t=30),"hour"===this.timeIncrement&&(t=60),new Date(this._getYear(),this._getMonth(),this._getDay(),0,0,0)),n=0;for(let e=0;e<1440;e+=t){let a=document.createElement("option");if(a.value=formatDateTime(r,this.dateFormat),n===this.selectedTimeIndex&&a.setAttribute("selected","selected"),this.twentyFourHourTime)a.innerText=r.getHours().toString().padStart(2,"0")+":"+r.getMinutes().toString().padStart(2,"0");else{let e=r.getHours(),t="AM";12<e&&(e-=12,t="PM"),12===e&&(t="PM"),0===e&&(e=12),a.innerText=`${e.toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")} `+t}this.timeSelectorEl.insertAdjacentElement("beforeend",a),r=new Date(r.getTime()+6e4*t),n++}}
/**
	 * @param {number} year
	 * @returns {HTMLAnchorElement}
	 */_createYearButton(year){let e=document.createElement("a");return e.href="javascript:void(0)",e.innerText=year.toString(),e.addEventListener("click",this._onYearClick.bind(this,year)),e}_createYearDownButton(){const e=document.createElement("a");return e.href="javascript:void(0)",e.innerHTML='<i class="icon--mdi icon--mdi--arrow-down"></i>',e.addEventListener("click",this._onYearDownClick.bind(this)),e}_createYearUpButton(){const e=document.createElement("a");return e.href="javascript:void(0)",e.innerHTML='<i class="icon--mdi icon--mdi--arrow-up"></i>',e.addEventListener("click",this._onYearUpClick.bind(this)),e}}customElements.define("date-time-picker",DateTimePicker);export{DateFormats,DateTimePicker,formatDateTime,parseDateTime};