/* Copyright Â© 2023 App Nerds LLC v1.2.3 */
const alertPosition={TopLeft:"top-left",TopCenter:"top-center",TopRight:"top-right",BottomLeft:"bottom-left",BottomCenter:"bottom-center",BottomRight:"bottom-right"},alertPositionIndex=[[alertPosition.TopLeft,alertPosition.TopCenter,alertPosition.TopRight],[alertPosition.BottomLeft,alertPosition.BottomCenter,alertPosition.BottomRight]],svgs={success:'<svg viewBox="0 0 426.667 426.667" width="18" height="18"><path d="M213.333 0C95.518 0 0 95.514 0 213.333s95.518 213.333 213.333 213.333c117.828 0 213.333-95.514 213.333-213.333S331.157 0 213.333 0zm-39.134 322.918l-93.935-93.931 31.309-31.309 62.626 62.622 140.894-140.898 31.309 31.309-172.203 172.207z" fill="#6ac259"></path></svg>',warn:'<svg viewBox="0 0 310.285 310.285" width=18 height=18> <path d="M264.845 45.441C235.542 16.139 196.583 0 155.142 0 113.702 0 74.743 16.139 45.44 45.441 16.138 74.743 0 113.703 0 155.144c0 41.439 16.138 80.399 45.44 109.701 29.303 29.303 68.262 45.44 109.702 45.44s80.399-16.138 109.702-45.44c29.303-29.302 45.44-68.262 45.44-109.701.001-41.441-16.137-80.401-45.439-109.703zm-132.673 3.895a12.587 12.587 0 0 1 9.119-3.873h28.04c3.482 0 6.72 1.403 9.114 3.888 2.395 2.485 3.643 5.804 3.514 9.284l-4.634 104.895c-.263 7.102-6.26 12.933-13.368 12.933H146.33c-7.112 0-13.099-5.839-13.345-12.945L128.64 58.594c-.121-3.48 1.133-6.773 3.532-9.258zm23.306 219.444c-16.266 0-28.532-12.844-28.532-29.876 0-17.223 12.122-30.211 28.196-30.211 16.602 0 28.196 12.423 28.196 30.211.001 17.591-11.456 29.876-27.86 29.876z" fill="#FFDA44" /> </svg>',info:'<svg viewBox="0 0 23.625 23.625" width=18 height=18> <path d="M11.812 0C5.289 0 0 5.289 0 11.812s5.289 11.813 11.812 11.813 11.813-5.29 11.813-11.813S18.335 0 11.812 0zm2.459 18.307c-.608.24-1.092.422-1.455.548a3.838 3.838 0 0 1-1.262.189c-.736 0-1.309-.18-1.717-.539s-.611-.814-.611-1.367c0-.215.015-.435.045-.659a8.23 8.23 0 0 1 .147-.759l.761-2.688c.067-.258.125-.503.171-.731.046-.23.068-.441.068-.633 0-.342-.071-.582-.212-.717-.143-.135-.412-.201-.813-.201-.196 0-.398.029-.605.09-.205.063-.383.12-.529.176l.201-.828c.498-.203.975-.377 1.43-.521a4.225 4.225 0 0 1 1.29-.218c.731 0 1.295.178 1.692.53.395.353.594.812.594 1.376 0 .117-.014.323-.041.617a4.129 4.129 0 0 1-.152.811l-.757 2.68a7.582 7.582 0 0 0-.167.736 3.892 3.892 0 0 0-.073.626c0 .356.079.599.239.728.158.129.435.194.827.194.185 0 .392-.033.626-.097.232-.064.4-.121.506-.17l-.203.827zm-.134-10.878a1.807 1.807 0 0 1-1.275.492c-.496 0-.924-.164-1.28-.492a1.57 1.57 0 0 1-.533-1.193c0-.465.18-.865.533-1.196a1.812 1.812 0 0 1 1.28-.497c.497 0 .923.165 1.275.497.353.331.53.731.53 1.196 0 .467-.177.865-.53 1.193z" fill="#006DF0" /> </svg>',error:'<svg viewBox="0 0 51.976 51.976" width=18 height=18> <path d="M44.373 7.603c-10.137-10.137-26.632-10.138-36.77 0-10.138 10.138-10.137 26.632 0 36.77s26.632 10.138 36.77 0c10.137-10.138 10.137-26.633 0-36.77zm-8.132 28.638a2 2 0 0 1-2.828 0l-7.425-7.425-7.778 7.778a2 2 0 1 1-2.828-2.828l7.778-7.778-7.425-7.425a2 2 0 1 1 2.828-2.828l7.425 7.425 7.071-7.071a2 2 0 1 1 2.828 2.828l-7.071 7.071 7.425 7.425a2 2 0 0 1 0 2.828z" fill="#D80027" /> </svg>'};function setup(){const e=document.createElement("div");e.className="alert-container";for(const t of[0,1]){const n=document.createElement("div");n.className="alert-row";for(const r of[0,1,2]){const i=document.createElement("div");i.className="alert-col "+alertPositionIndex[t][r],n.appendChild(i)}e.appendChild(n)}document.body.appendChild(e)}function alert(c={title:void 0,position:alertPosition.TopRight,duration:3e3,closable:!0,focusable:!0,callback:void 0}){function n(e="Welcome to NerdAlert!",t,n){t={...c,...t};const r=document.getElementsByClassName(t.position)[0],i=document.createElement("div");i.className="alert-card "+n,i.innerHTML+=svgs[n],i.options={...t,message:e,type:n,yPos:-1<t.position.indexOf("top")?"top":"bottom",inFocus:!1};{e=i;const s=document.createElement("div");s.className="text-group",e.options.title&&(s.innerHTML=`<h4>${e.options.title}</h3>`),s.innerHTML+=`<p>${e.options.message}</p>`,e.appendChild(s)}var a,o;(a=i).style.setProperty("margin-"+a.options.yPos,"-15px"),a.style.setProperty("opacity","0"),setTimeout(()=>{a.style.setProperty("margin-"+a.options.yPos,"15px"),a.style.setProperty("opacity","1")},50),(o=i).addEventListener("click",()=>{o.options.closable&&l(o)}),o.addEventListener("mouseover",()=>{o.options.isFocus=o.options.focusable}),o.addEventListener("mouseout",()=>{o.options.isFocus=!1,d(o,o.options.duration)}),d(i),r.appendChild(i)}function d(e){0!==e.options.duration&&setTimeout(()=>{e.options.isFocus||l(e)},e.options.duration)}function l(e){e.style.setProperty("margin-"+e.options.yPos,`-${e.offsetHeight}px`),e.style.setProperty("opacity","0"),setTimeout(()=>{e.remove(),"function"==typeof e.options.callback&&e.options.callback()},500)}return document.getElementsByClassName("alert-container").length||setup(),{success(e,t){n(e,t,"success")},info(e,t){n(e,t,"info")},warn(e,t){n(e,t,"warn")},error(e,t){n(e,t,"error")}}}function shim(e={closeOnClick:!1}){function t(t){t={...e,...t};let n=void 0;function r(e=!0){n&&(n.remove(),n=void 0,"function"==typeof t.callback&&e&&t.callback())}return{hide(e=!0){r(e)},show(){n||document.getElementsByClassName("shim").length?document.getElementsByClassName("shim").length&&(n=document.getElementsByClassName("shim")[0]):((n=document.createElement("div")).classList.add("shim"),t.closeOnClick&&n.addEventListener("click",()=>{r(!0)}),document.body.appendChild(n))}}}return{new(e){return t(e={callback:void 0,...e})}}}function confirm(e={callback:void 0}){const m=shim({closeOnClick:!0});let h;function r(t,n,r){r={...e,...r};const i=document.createElement("dialog");i.classList.add("confirm-container"),h=m.new({callback:()=>{u(i,r.callback,!1)}}),i.innerHTML+=`<p>${n}</p>`;{var a=i,o=(n=t,r.callback);let e=[];if("yesno"===n){const c=document.createElement("button"),d=(c.innerText="No",c.classList.add("cancel-button"),c.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),h.hide(!1),u(a,o,!1)}),document.createElement("button"));d.innerText="Yes",d.classList.add("action-button"),d.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),h.hide(!1),u(a,o,!0)}),e.push(c),e.push(d)}else{const l=document.createElement("button");l.innerText="Close",l.classList.add("action-button"),l.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),h.hide(!1),u(a,o)}),e.push(l)}const s=document.createElement("div");s.classList.add("button-row"),e.forEach(e=>{s.appendChild(e)}),a.appendChild(s)}h.show(),document.body.appendChild(i)}function u(e,t,n){e.remove(),"function"==typeof t&&t(n)}return{confirm(e,t){r("confirm",e,t)},yesNo(e,n){return new Promise(t=>{n={callback:e=>t(e),...n},r("yesno",e,n)})}}}const DateFormats={IsoWithTimezone:"yyyy-mm-ddthh:mm:ssz",IsoWithoutTimezone:"yyyy-mm-ddthh:mm:ss",InternationalWithSeconds:"yyyy-mm-dd hh:mm:ss",International:"yyyy-mm-dd hh:mm",UsDateTimeWithSeconds:"mm/dd/yyyy hh:mm:ss am/pm",UsDateTimeWithoutSeconds:"mm/dd/yyyy hh:mm am/pm",IsoDate:"yyyy-mm-dd",UsDate:"mm/dd/yyyy"},formatMap={"yyyy-mm-ddthh:mm:ssz":format1,"yyyy-mm-ddthh:mm:ss":format2,"yyyy-mm-dd hh:mm:ss":format3,"yyyy-mm-dd hh:mm":format4,"mm/dd/yyyy hh:mm:ss am/pm":format5,"mm/dd/yyyy hh:mm am/pm":format6,"yyyy-mm-dd":format7,"mm/dd/yyyy":format8};function parseDateTime(e){return"number"==typeof e?new Date(e):e instanceof Date?e:"string"==typeof e?parseDateString(e):void 0}function formatDateTime(e,t){e=parseDateTime(e);let n=formatMap[t.toLowerCase()];if(n)return n(e);throw new Error("Invalid date format: "+t)}function format1(e){var{year:e,month:t,day:n,hour:r,minute:i,second:a}=breakDownDate(e);return`${zeroPad(e)}-${zeroPad(t)}-${zeroPad(n)}T${zeroPad(r)}:${zeroPad(i)}:${zeroPad(a)}Z`}function format2(e){var{year:e,month:t,day:n,hour:r,minute:i,second:a}=breakDownDate(e);return`${zeroPad(e)}-${zeroPad(t)}-${zeroPad(n)}T${zeroPad(r)}:${zeroPad(i)}:`+zeroPad(a)}function format3(e){var{year:e,month:t,day:n,hour:r,minute:i,second:a}=breakDownDate(e);return`${zeroPad(e)}-${zeroPad(t)}-${zeroPad(n)} ${zeroPad(r)}:${zeroPad(i)}:`+zeroPad(a)}function format4(e){var{year:e,month:t,day:n,hour:r,minute:i}=breakDownDate(e);return`${zeroPad(e)}-${zeroPad(t)}-${zeroPad(n)} ${zeroPad(r)}:`+zeroPad(i)}function format5(e){let{year:t,month:n,day:r,hour:i,minute:a,second:o}=breakDownDate(e),s="AM";return 12<i&&(s="PM",i-=12),0===i&&(i=12),`${zeroPad(n)}/${zeroPad(r)}/${zeroPad(t)} ${zeroPad(i)}:${zeroPad(a)}:${zeroPad(o)} `+s}function format6(e){let{year:t,month:n,day:r,hour:i,minute:a}=breakDownDate(e),o="AM";return 12<i&&(o="PM",i-=12),0===i&&(i=12),`${zeroPad(n)}/${zeroPad(r)}/${zeroPad(t)} ${zeroPad(i)}:${zeroPad(a)} `+o}function format7(e){var{year:e,month:t,day:n}=breakDownDate(e);return`${zeroPad(e)}-${zeroPad(t)}-`+zeroPad(n)}function format8(e){var{year:e,month:t,day:n}=breakDownDate(e);return`${zeroPad(t)}/${zeroPad(n)}/`+zeroPad(e)}function breakDownDate(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()}}function zeroPad(e){return e.toString().padStart(2,"0")}function parseDateString(t){var n=[/(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})t(?<hour>\d{2}):(?<minute>\d{2}):(?<second>\d{2})z/i,/(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})t(?<hour>\d{2}):(?<minute>\d{2}):(?<second>\d{2})/i,/(?<month>\d{2})\/(?<day>\d{2})\/(?<year>\d{4})\s+(?<hour>\d{2}):(?<minute>\d{2}):(?<second>\d{2})\s*(?<meridian>am|pm)/i,/(?<month>\d{2})\/(?<day>\d{2})\/(?<year>\d{4})\s+(?<hour>\d{2}):(?<minute>\d{2})\s*(?<meridian>am|pm)/i,/(?<year>\d{4})-(?<month>\d{2})-(?<day>\d{2})/,/(?<month>\d{2})\/(?<day>\d{2})\/(?<year>\d{4})/];for(let e=0;e<n.length;e++){var r=t.match(n[e]);if(r){var i=r.groups.year||(new Date).getFullYear(),a=r.groups.month||(new Date).getMonth(),o=r.groups.day||(new Date).getDate();let e=r.groups.hour||0;var s=r.groups.minute||0,c=r.groups.second||0;let t=r.groups.meridian||"";return""!==t&&(e=parseInt(e),"pm"===t.toLowerCase()&&e<12&&(e=parseInt(e)+12)),new Date(i,parseInt(a)-1,o,e,s,c)}}throw new Error("no pattern match for "+t)}class DateTimePicker extends HTMLElement{constructor(){super(),this._daysOfTheWeek=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this._months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.name=this.getAttribute("name")||"dateTime",this.date=parseDateTime(this.getAttribute("date"))||Date.now(),this.dateFormat=this.getAttribute("date-format")||DateFormats.IsoWithTimezone,this.showTimeSelector=this.dateFormat===DateFormats.IsoWithTimezone||this.dateFormat===DateFormats.IsoWithoutTimezone||this.dateFormat===DateFormats.UsDateTimeWithSeconds||this.dateFormat===DateFormats.UsDateTimeWithoutSeconds||this.dateFormat===DateFormats.InternationalWithSeconds||this.dateFormat===DateFormats.International,this.twentyFourHourTime=this.dateFormat===DateFormats.IsoWithTimezone||this.dateFormat===DateFormats.IsoWithoutTimezone||this.dateFormat===DateFormats.InternationalWithSeconds||this.dateFormat===DateFormats.International,this.timeIncrement=this.getAttribute("time-increment")||"hour",this.today=new Date,this.inputEl=null,this.popupEl=null,this.headerEl=null,this.bodyEl=null,this.day=0,this.timeSelectorEl=null,this.selectedTimeIndex=0,this.yearBlockStart=this.getYear()-5}connectedCallback(){this.setAttribute("name",this.name+"-datepicker"),this.setAttribute("aria-label","Date Picker"),this.inputEl=this._createInputEl();var e=this._createInputLabel();this.popupEl=this.createPopupEl(),this.drawHeaderEl(),this.drawCalendarBody(),this.insertAdjacentElement("beforeend",this.inputEl),this.insertAdjacentElement("beforeend",e),this.insertAdjacentElement("beforeend",this.popupEl)}createPopupEl(){let e=document.createElement("div");return this.headerEl=document.createElement("header"),this.bodyEl=document.createElement("section"),e.classList.add("date-time-picker-popup","calendar-hidden"),e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-label","Choose Date"),e.insertAdjacentElement("beforeend",this.headerEl),e.insertAdjacentElement("beforeend",this.bodyEl),e}drawHeaderEl(){var e=this._createPreviousMonthButton(),t=this._createNextMonthButton(),n=this._createCurrentMonthButton(),r=this._createCurrentYearButton();this.headerEl.innerHTML="",this.headerEl.insertAdjacentElement("beforeend",e),this.headerEl.insertAdjacentElement("beforeend",n),this.headerEl.insertAdjacentElement("beforeend",r),this.headerEl.insertAdjacentElement("beforeend",t)}drawCalendarBody(){let t=document.createElement("div"),n=this._createCalendarBodyWeekDiv(),e=this.getFirstDayOfMonth();var r=e.getDay();let i=this.getLastDayOfMonth();var a,o=i.getDate();let s=!1;t.classList.add("calendar-body");for(let e=0;e<o+r;e++){s||e===r&&(s=!0);var c=this._createCalendarBodyDayDiv(s,e,r);n.insertAdjacentElement("beforeend",c),(e+1)%7||(t.insertAdjacentElement("beforeend",n),n=this._createCalendarBodyWeekDiv())}""!==n.innerHTML&&t.insertAdjacentElement("beforeend",n),this.showTimeSelector&&(this._createTimeSelector(),t.insertAdjacentElement("beforeend",this.timeSelectorEl),a=this._createOkButton(),t.insertAdjacentElement("beforeend",a)),this.replaceBodyEl(t)}drawMonthListBody(){const t=document.createElement("div");t.classList.add("month-list-body");for(let e=0;e<this._months.length;e++){var n=this._createMonthButton(e);t.insertAdjacentElement("beforeend",n)}this.replaceBodyEl(t)}drawYearListBody(){const e=document.createElement("div"),t=(e.classList.add("year-list-body"),document.createElement("div"));t.classList.add("year-list");var n=this._createYearUpButton(),r=this._createYearDownButton();e.insertAdjacentElement("beforeend",n);for(let e=this.yearBlockStart;e<this.yearBlockStart+10;e++){var i=this._createYearButton(e);t.insertAdjacentElement("beforeend",i)}e.insertAdjacentElement("beforeend",t),e.insertAdjacentElement("beforeend",r),this.replaceBodyEl(e)}getMonth(){return new Date(this.date).getMonth()}getMonthName(){return this._months[this.getMonth()]}getYear(){return new Date(this.date).getFullYear()}getDay(){return new Date(this.date).getDate()}getFirstDayOfMonth(){return new Date(this.getYear(),this.getMonth(),1)}getLastDayOfMonth(){return new Date(this.getYear(),this.getMonth()+1,0)}getHour(){return new Date(this.date).getHours()}getMinute(){return new Date(this.date).getMinutes()}getSecond(){return new Date(this.date).getSeconds()}moveMonth(e){let t=new Date(this.date);t.setMonth(t.getMonth()+e),this.date=t,this.popupEl.querySelector("header a:nth-child(2)").innerText=this.getMonthName(),this.popupEl.querySelector("header a:nth-child(3)").innerText=this.getYear(),this.popupEl.querySelector(".calendar-body").remove(),this.drawCalendarBody()}onCalendarDayClick(e){this.day=e,this.setInputDate(),this.showTimeSelector?this._createTimeSelectorOptions():(this.toggleCalendar(),this.inputEl.focus())}onHeaderMonthClick(){this.drawMonthListBody()}onHeaderYearClick(){this.drawYearListBody()}onMonthClick(e){this.date=new Date(this.getYear(),e,1),this.setInputDate(this.date),this.drawHeaderEl(),this.drawCalendarBody()}onTimeChange(e){var t=e.target.value;this.selectedTimeIndex=e.target.selectedIndex,this.date=t,this.setInputDate()}onYearClick(e){this.date=new Date(e,this.getMonth(),1),this.setInputDate(this.date),this.drawHeaderEl(),this.drawCalendarBody()}onYearDownClick(){this.yearBlockStart+=10,this.drawYearListBody()}onYearUpClick(){this.yearBlockStart-=10,this.drawYearListBody()}replaceBodyEl(e){this.bodyEl.innerHTML="",this.bodyEl.insertAdjacentElement("beforeend",e)}setInputDate(){var e=new Date(this.getYear(),this.getMonth(),this.day,this.getHour(),this.getMinute(),this.getSecond());this.inputEl.value=formatDateTime(e,this.dateFormat),this.dispatchEvent(new CustomEvent("change",{detail:{value:e}}))}toggleCalendar(){this.popupEl.classList.toggle("calendar-hidden"),this.inputEl.focus()}_createCalendarBodyDayDiv(t,n,r){let i=document.createElement("div");if(i.classList.add("day"),t){t=n-r+1;let e=document.createElement("a");e.href="javascript:void(0)",e.innerText=""+t,e.addEventListener("click",this.onCalendarDayClick.bind(this,t)),new Date(this.getYear(),this.getMonth(),t)===this.today&&e.classList.add("today"),i.insertAdjacentElement("beforeend",e)}else i.classList.add("disabled");return i}_createCalendarBodyWeekDiv(){let e=document.createElement("div");return e.classList.add("week"),e}_createCurrentMonthButton(){let e=document.createElement("a");return e.href="javascript:void(0)",e.innerHTML=this.getMonthName(),e.addEventListener("click",this.onHeaderMonthClick.bind(this)),e}_createCurrentYearButton(){let e=document.createElement("a");return e.href="javascript:void(0)",e.innerHTML=this.getYear(),e.addEventListener("click",this.onHeaderYearClick.bind(this)),e}_createInputEl(){let e=document.createElement("input");return e.setAttribute("type","datetime"),e.setAttribute("name",this.name),e.setAttribute("aria-describedby",this.name+"-format"),e.value=formatDateTime(this.date,this.dateFormat),e.addEventListener("click",()=>{this.toggleCalendar()}),e}_createInputLabel(){let e=document.createElement("p");return e.innerText=`(${this.dateFormat})`,e.id=this.name+"-format",e}_createMonthButton(e){let t=document.createElement("a");return t.href="javascript:void(0)",t.innerText=this._months[e],t.addEventListener("click",this.onMonthClick.bind(this,e)),t}_createNextMonthButton(){let e=document.createElement("a");return e.href="javascript:void(0)",e.innerHTML='<i class="icon--mdi icon--mdi--arrow-right"></i>',e.addEventListener("click",this.moveMonth.bind(this,1)),e}_createOkButton(){let e=document.createElement("a");return e.href="javascript:void(0)",e.innerText="OK",e.classList.add("ok"),e.addEventListener("click",this.toggleCalendar.bind(this)),e}_createPreviousMonthButton(){let e=document.createElement("a");return e.href="javascript:void(0)",e.innerHTML='<i class="icon--mdi icon--mdi--arrow-left"></i>',e.addEventListener("click",this.moveMonth.bind(this,-1)),e}_createTimeSelector(){this.timeSelectorEl=document.createElement("select"),this._createTimeSelectorOptions(),this.timeSelectorEl.addEventListener("change",this.onTimeChange.bind(this))}_createTimeSelectorOptions(){this.timeSelectorEl.innerHTML="";let t=1,r=("5minute"===this.timeIncrement&&(t=5),"10minute"===this.timeIncrement&&(t=10),"15minute"===this.timeIncrement&&(t=15),"30minute"===this.timeIncrement&&(t=30),"hour"===this.timeIncrement&&(t=60),new Date(this.getYear(),this.getMonth(),this.getDay(),0,0,0)),i=0;for(let e=0;e<1440;e+=t){let n=document.createElement("option");if(n.value=formatDateTime(r,this.dateFormat),i===this.selectedTimeIndex&&n.setAttribute("selected","selected"),this.twentyFourHourTime)n.innerText=r.getHours().toString().padStart(2,"0")+":"+r.getMinutes().toString().padStart(2,"0");else{let e=r.getHours(),t="AM";12<e&&(e-=12,t="PM"),12===e&&(t="PM"),0===e&&(e=12),n.innerText=`${e.toString().padStart(2,"0")}:${r.getMinutes().toString().padStart(2,"0")} `+t}this.timeSelectorEl.insertAdjacentElement("beforeend",n),r=new Date(r.getTime()+6e4*t),i++}}_createYearButton(e){let t=document.createElement("a");return t.href="javascript:void(0)",t.innerText=e,t.addEventListener("click",this.onYearClick.bind(this,e)),t}_createYearDownButton(){const e=document.createElement("a");return e.href="javascript:void(0)",e.innerHTML='<i class="icon--mdi icon--mdi--arrow-down"></i>',e.addEventListener("click",this.onYearDownClick.bind(this)),e}_createYearUpButton(){const e=document.createElement("a");return e.href="javascript:void(0)",e.innerHTML='<i class="icon--mdi icon--mdi--arrow-up"></i>',e.addEventListener("click",this.onYearUpClick.bind(this)),e}}customElements.define("date-time-picker",DateTimePicker);class PopupMenu extends HTMLElement{constructor(){super(),this._trigger=null,this._el=null}connectedCallback(){if(this._trigger=this.getAttribute("trigger"),!this._trigger)throw new Error("You must provide a query selector for the element used to trigger this popup.");this.style.visibility="hidden",document.querySelector(this._trigger).addEventListener("click",this.toggle.bind(this))}disconnectedCallback(){let e=document.querySelector(this._trigger);e&&e.removeEventListener("click",this.toggle.bind(this))}toggle(e){e&&e.preventDefault();var e=document.querySelector(this._trigger).getBoundingClientRect(),t=this.getBoundingClientRect();t.right>window.innerWidth?this.style.left=e.x+(window.innerWidth-t.right)-3+"px":this.style.left=e.x+"px",this.style.top=e.y+e.height+3+"px","hidden"===this.style.visibility?this.style.visibility="visible":this.style.visibility="hidden"}}class PopupMenuItem extends HTMLElement{constructor(){super()}connectedCallback(){this.render()}render(){var e=this.getAttribute("text"),t=this.getAttribute("icon");const n=document.createElement("div");n.classList.add("popup-menu-item");let r="";t&&(r+=`<i data-feather="${t}"></i> `),r+=e,n.innerHTML=r,n.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.dispatchEvent(new CustomEvent("click",{detail:e}));const t=e.target.parentElement.parentElement;t.style.visibility="hidden"}),this.insertAdjacentElement("beforeend",n)}}const showPopup=e=>{document.querySelector(e).style.visibility="visible"},hidePopup=e=>{document.querySelector(e).style.visibility="hidden"};function spinner(){let e=void 0;return{hide(){e&&(e.remove(),e=void 0)},show(){e||((e=document.createElement("div")).classList.add("spinner"),e.innerHTML=`<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <circle cx="50" cy="50" r="45" />
        </svg>
      `,document.body.appendChild(e))}}}async function fetcher(e,t,n,r=1e3){let i,a;n&&(i=setTimeout(()=>{n.show()},r));try{a=await fetch(e,t)}finally{n&&(clearTimeout(i),n.hide())}return a}customElements.get("popup-menu")||customElements.define("popup-menu",PopupMenu),customElements.get("popup-menu-item")||customElements.define("popup-menu-item",PopupMenuItem);class GraphQL{constructor(e,t={http:fetcher,tokenGetterFunction:null,expiredTokenCallback:null,spinner:null,navigateTo:null}){t={http:fetcher,tokenGetterFunction:null,expiredTokenCallback:null,spinner:null,navigateTo:null,...t},this.queryURL=e,this.http=t.http,this.tokenGetterFunction=t.tokenGetterFunction,this.expiredTokenCallback=t.expiredTokenCallback,this.spinner=t.spinner,this.navigateTo=t.navigateTo}async query(n){if(!this.expiredTokenCallback||this.expiredTokenCallback(null,"/",this.navigateTo)){var r=this.tokenGetterFunction?this.tokenGetterFunction():"";n=`query {
			${n}
		}`;let e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})},t=(r&&(e.headers.Authorization="Bearer "+r),await this.http(this.queryURL,e,this.spinner));if(400!==t.status&&401!==t.status){n=await t.json();if(t.ok)return n;throw new Error(n.message)}this.expiredTokenCallback&&this.expiredTokenCallback(t,"/",this.navigateTo)}}async mutation(n){if(!this.expiredTokenCallback||this.expiredTokenCallback(null,"/",this.navigateTo)){var r=this.tokenGetterFunction?this.tokenGetterFunction():"";n=`mutation {
			${n}
		}`;let e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})},t=(r&&(e.headers.Authorization="Bearer "+r),await this.http(this.queryURL,e,this.spinner));if(400!==t.status&&401!==t.status){n=await t.json();if(t.ok)return n;throw new Error(n.message)}this.expiredTokenCallback&&this.expiredTokenCallback(t,"/",this.navigateTo)}}}const debounce=(t,n=400)=>{let r=null;return function(){let e=arguments;clearTimeout(r),r=setTimeout(()=>{t.apply(this,e)},n)}},objectToMap=(e={})=>{let t=new Map;for(const n in e)t.set(n,e[n]);return t},ErrTokenExpired="token expired";class SessionService{static clearMember(){window.sessionStorage.removeItem("member")}static clearToken(){window.sessionStorage.removeItem("token")}static getMember(){return JSON.parse(window.sessionStorage.getItem("member"))}static getToken(){return JSON.parse(window.sessionStorage.getItem("token"))}static hasMember(){return null!==window.sessionStorage.getItem("member")}static hasToken(){return null!==window.sessionStorage.getItem("token")}static navigateOnTokenExpired(e,t,n){e.message===ErrTokenExpired&&(SessionService.clearToken(),n(t))}static setMember(e){window.sessionStorage.setItem("member",JSON.stringify(e))}static setToken(e){window.sessionStorage.setItem("token",JSON.stringify(e))}static tokenExpireFunc(e,t,n){return e&&401===e.status?(SessionService.clearToken(),SessionService.navigateOnTokenExpired({message:ErrTokenExpired},t,n),!1):!!SessionService.hasToken()||(SessionService.navigateOnTokenExpired({message:ErrTokenExpired},t,n),!1)}}class BaseView extends HTMLElement{constructor(e,t){super(),this._title="",this.params=e,this._state={},this._onRenderComplete=window._router.onRenderComplete||null,this.router=window._router}async connectedCallback(){await this.beforeRender(),await this.render(),this._setDocumentTitle(),await this.afterRender(),this._onRenderComplete&&this._onRenderComplete(this)}disconnectedCallback(){this.onUnload()}_setDocumentTitle(){var e=this.querySelectorAll("title");e&&0<e.length&&(this._title=e[0].innerText,document.title=this._title,this.removeChild(e[0]))}async beforeRender(){}async afterRender(){}async onUnload(){}async render(){throw new Error("not implemented")}get title(){return this._title}get html(){return this._html}get state(){return this._state}set state(e){this._state=e}getQueryParam(e){return this.router.getQueryParam(e)}navigateTo(e,t={},n={}){this.router.navigateTo(e,t,n)}}class DefaultPageNotFound extends BaseView{constructor(e){super(e)}async render(){return`
			<title>Page Not Found</title>
			<p>The page ${this.params.path} could not be found.</p>
		`}}customElements.get("default-page-not-found")||customElements.define("default-page-not-found",DefaultPageNotFound);class Router{constructor(e,t,n=null){this.targetEl=e,this.routes=t,this.pageNotFoundView=n,this.beforeRoute=null,this.afterRoute=null,this.injectParams=null,this.onRenderComplete=null,this.pageNotFoundView?this.routes.push({path:"/404notfound/:path",view:this.pageNotFoundView}):this.routes.push({path:"/404notfound/:path",view:DefaultPageNotFound})}_pathToRegex(e){return new RegExp("^"+e.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")+"$")}_getParams(e){let t=0;var n=e.result.slice(1),r=Array.from(e.route.path.matchAll(/:(\w+)/g)).map(e=>e[1]);let i={};for(t=0;t<n.length;t++)i[r[t]]=n[t];if(this.injectParams){var a=this.injectParams(e);for(const o in a)i[o]=a[o]}return i}async _route(e){let t={};e.state&&(t=e.state);const n=this.routes.map(e=>({route:e,result:location.pathname.match(this._pathToRegex(e.path))}));let r=n.find(e=>null!==e.result);if(r){if(!this.beforeRoute||!1!==this.beforeRoute.apply(this,r.route)){e=this._getParams(r);const i=new r.route.view(e),a=(i.state=t,document.querySelector(this.targetEl));a.innerHTML="",a.appendChild(i),this.afterRoute&&this.afterRoute(r.route)}}else this.navigateTo("/404notfound"+location.pathname)}getQueryParam(e){let t=new URLSearchParams(location.search);return t.get(e)}navigateTo(e,t={},n={}){let r="";if(0<Object.keys(t).length){var i,a,t=objectToMap(t);r+="?";for([i,a]of t){var o=encodeURIComponent(i);let e=a;"object"==typeof a&&(e=JSON.stringify(a));var s=encodeURIComponent(e);r+=o+`=${s}&`}}history.pushState(n,null,""+e+r),this._route({state:n})}}const application=(e,t,n=DefaultPageNotFound)=>(window._router=new Router(e,t,n),window.navigateTo=window._router.navigateTo.bind(window._router),window.addEventListener("popstate",e=>{window._router._route({state:e.state})}),{routes:t,targetElement:e,router:window._router,afterRoute:e=>{window._router.afterRoute=e.bind(window._router)},beforeRoute:e=>{window._router.beforeRoute=e.bind(window._router)},injectParams:e=>{window._router.injectParams=e.bind(window._router)},onRenderComplete:e=>{window._router.onRenderComplete=e.bind(window._router)},go:()=>{window._router._route({})}});class MemberService{spinnerEl;constructor(e){this.spinnerEl=e}async getCurrentMember(){let e=await fetcher("/api/member/current",{method:"GET",headers:{"Content-Type":"application/json"}},this.spinnerEl);return await e.json()}}class MemberLoginBar extends HTMLElement{memberService;loginPath;constructor(){super(),this.loginPath=this.getAttribute("login-path")||"/member/login";var e=this.getAttribute("spinner")||null;let t=null;e&&(t=document.querySelector(e)),this.memberService=new MemberService(t)}static get observedAttributes(){return["login-path"]}set memberService(e){this.memberService=e}attributedChangedCallback(e,t,n){"login-path"===e&&(this.loginPath=n)}async connectedCallback(){var e=await this.memberService.getCurrentMember(),t=this.createContainerEl();this.createAvatarEl(t,e),this.createTextEl(t,e),this.createPopupMenu(t,e),this.insertAdjacentElement("beforeend",t),feather.replace()}createContainerEl(){return document.createElement("div")}createAvatarEl(e,t){let n;t&&t.avatarURL?((n=document.createElement("img")).classList.add("avatar"),n.setAttribute("role","img"),n.src=t.avatarURL):((n=document.createElement("div")).classList.add("avatar"),n.setAttribute("role","img"),n.innerHTML='<i data-feather="user"></i>'),e.insertAdjacentElement("beforeend",n)}createTextEl(e,t){let n;const r=document.createElement("a");if(r.id="member-link",t&&t.email){let e="";r.href="#",t.firstName&&(e+=t.firstName),t.lastName&&(e+=" "+t.lastName),""===e&&(e="User"),n=e+' <i data-feather="chevron-down"></i>'}else r.href=this.loginPath,n="Log In";r.innerHTML=n,e.insertAdjacentElement("beforeend",r)}createPopupMenu(e,t){if(t&&t.email){const n=document.createElement("popup-menu"),r=(n.setAttribute("trigger","#member-link"),[{id:"member-my-account-link",text:"My Account",icon:"home",handler:this.onMyAccountClick.bind(this)},{id:"member-log-out-link",text:"Log Out",icon:"log-out",handler:this.onLogOutClick.bind(this)}]);r.forEach(e=>{const t=document.createElement("popup-menu-item");t.setAttribute("id",e.id),t.setAttribute("text",e.text),t.setAttribute("icon",e.icon),t.addEventListener("click",e.handler),n.insertAdjacentElement("beforeend",t)}),e.insertAdjacentElement("beforeend",n)}}onMyAccountClick(){window.location="/member/profile"}onLogOutClick(){window.location="/api/member/logout"}}customElements.get("member-login-bar")||customElements.define("member-login-bar",MemberLoginBar);class GoogleLoginForm extends HTMLElement{loginPath;createAccountPath;signInButtonURL;constructor(){super(),this.loginPath=this.getAttribute("login-path")||"/auth/google",this.createAccountPath=this.getAttribute("create-account-path")||"/create-account",this.signInButtonURL=this.getAttribute("sign-in-button-url")||"/static/images/sign-in-with-google.jpg"}connectedCallback(){const e=document.createElement("section"),t=(e.classList.add("google-login-form"),document.createElement("div"));t.classList.add("sign-up-footer"),e.innerHTML=`
      <a href="${this.loginPath}"><img src="${this.signInButtonURL}" alt="Sign in with Google" style="width:100%;" /></a>
    `,t.innerHTML=`
      <p>
        Don't have an account? Click <a href="${this.createAccountPath}">here</a> to create one.
      </p>
    `,e.insertAdjacentElement("beforeend",t),this.insertAdjacentElement("beforeend",e)}}customElements.get("google-login-form")||customElements.define("google-login-form",GoogleLoginForm);class MessageBar extends HTMLElement{constructor(){super(),this.messageType=this.getAttribute("message-type")||"info",this.message=this.getAttribute("message")||"",this.containerEl=null}connectedCallback(){this.containerEl=this.createContainerEl();var e=this.createCloseButtonEl(),t=this.createTextEl();this.containerEl.insertAdjacentElement("beforeend",e),this.containerEl.insertAdjacentElement("beforeend",t),this.insertAdjacentElement("beforeend",this.containerEl)}createContainerEl(){const e=document.createElement("div");switch(e.classList.add("message-bar"),this.messageType){case"error":e.classList.add("message-bar-error");break;case"warn":e.classList.add("message-bar-warn");break;case"info":e.classList.add("message-bar-info");break;case"success":e.classList.add("message-bar-success")}return e}createCloseButtonEl(){const e=document.createElement("span");return e.innerHTML="&times;",e.addEventListener("click",()=>{this.containerEl&&this.containerEl.remove()}),e}createTextEl(){const e=document.createElement("p");return e.setAttribute("role","alert"),e.innerHTML=this.message,e}}customElements.define("message-bar",MessageBar);class ColorPicker extends HTMLElement{constructor(){super(),this._color=this.getAttribute("color")||"",this._colors=this.getAttribute("colors")||"#ffffff,#858585,#000000,#fc1303,#8f0b01,#fc5e03,#943701,#fcc600,#8f7000,#37fc00,#1e8701,#03fcdf,#018778,#05c5fa,#017291,#0349fc,#002582,#7e00fc,#47018c,#fc03f4,#8a0085,#fa009a,#8a0055",this._name=this.getAttribute("name")||"color";var e=this._colors.split(",");const t=this.createOuterContainer();e=this.createColorGrid(e,this._color);this.input=this.createInput(this._name,this._color),t.insertAdjacentElement("beforeend",e),t.insertAdjacentElement("beforeend",this.input),this.appendChild(t)}createOuterContainer(){const e=document.createElement("div");return e.classList.add("color-picker"),e}createColorGrid(e,t){const n=document.createElement("div");return n.classList.add("grid"),e.forEach(e=>{e=this.createColorItem(e,t);n.insertAdjacentElement("beforeend",e)}),n}createColorItem(e,t){const n=document.createElement("div");return n.classList.add("grid-item"),n.style.backgroundColor=e,n.setAttribute("data-color",e),t===e&&n.classList.add("grid-item-selected"),n.addEventListener("click",this.onColorItemClicked.bind(this)),n}createInput(e,t){const n=document.createElement("input");return n.setAttribute("type","text"),n.setAttribute("name",e),n.setAttribute("aria-label","Selected color hexidecimal value"),n.setAttribute("autocomplete","on"),n.classList.add("color-input"),n.value=t,n}onColorItemClicked(e){this.clearGridSelectedClasses();var t=e.target.getAttribute("data-color");e.target.classList.add("grid-item-selected"),this.input.value=t,this.dispatchEvent(new CustomEvent("color-selected",{detail:t}))}clearGridSelectedClasses(){const t=document.querySelectorAll(".grid-item");for(let e=0;e<t.length;e++)t[e].classList.remove("grid-item-selected")}}customElements.get("color-picker")||customElements.define("color-picker",ColorPicker);var frame={alertPosition:alertPosition,alert:alert,confirm:confirm,DateFormats:DateFormats,DateTimePicker:DateTimePicker,formatDateTime:formatDateTime,PopupMenu:PopupMenu,PopupMenuItem:PopupMenuItem,showPopup:showPopup,hidePopup:hidePopup,shim:shim,spinner:spinner,fetcher:fetcher,GraphQL:GraphQL,debounce:debounce,objectToMap:objectToMap,parseDateTime:parseDateTime,SessionService:SessionService,ErrTokenExpired:ErrTokenExpired,application:application,BaseView:BaseView,MemberLoginBar:MemberLoginBar,MemberService:MemberService,GoogleLoginForm:GoogleLoginForm,MessageBar:MessageBar,ColorPicker:ColorPicker};export{frame as default};